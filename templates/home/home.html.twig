{% extends 'base.html.twig' %}

{% block title %}Accueil Soin de soi{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/main.css') }}">
	<link rel="stylesheet" href="{{ asset('css/home.css') }}">
	<link rel="stylesheet" href="{{ asset('css/btn.css') }}">
{% endblock %}

{% block body %}

	<div class="container w-75 mt-5">

		<h1 style="color:#6E0E79">
		<strong>Soin de soi !</strong> 
		</h1>

		<p class="indexHome">
		Découvrez une large gamme de produits pour votre bien-être.
		</p>

		{% for product in products %}
			<div class="card">

				<img class="img-card" src="{{asset('uploads/images/' ~ product.image) }}" alt="Photo">

				<div class="card-body">

					<a href="{{ path('app_home_product_show', {'slug': product.slug}) }}" class="btn btn-outline-success">Voir produit</a>

					<h5 class="card-title">{{ product.name }}
						{% if product.averageRating is not null %}
							<a style="color: inherit; text-decoration: none;" href="{{ path('app_review_index', {'slug': product.slug}) }}">
								<span class="average-rating">
									⭐
									{{ product.averageRating }}/5</span>
							</a>
						{% endif %}
					</h5>
					{% if product.description is not empty %}
						<p class="card-text">{{ product.description }}</p>
					{% else %}
						<p class="text-muted fst-italic">Pas de description</p>
					{% endif %}
					<p class="card-text">{{ product.price }}
						€</p>

					{% if product.stock > 0 %}
						 <span class="badge bg-success">Disponible ({{ product.stock }} en stock)</span>
												 
						<a class="btn btn-success" href="{{path('app_shopping_cart_add', {'slug': product.slug})}}">Ajouter au panier</a>
					{% else %}
						<span class="badge bg-danger">Rupture de stock</span>

					{% endif %}

					{# {% elseif product.stock > 0 %} #}
					{# <span class="badge bg-warning">Derniers exemplaires : {{ product.stock }}</span> #}

				</div>
			</div>
		{% endfor %}

		{{ knp_pagination_render(products, 'layouts/_paginator.html.twig') }}
	</div>
{% endblock %}
